import React, { useState ,useEffect} from 'react';
const FilterIcon = ({ svg, onClick, isActive }) => {
  return (
    <div
      className={`filtericons ${isActive ? 'active' : ''}`}
      onClick={onClick}
    >
      {svg}
    </div>
  );
};

const Filters = ({ onFilterChange }) => {
  const [activeIndex, setActiveIndex] = useState(parseInt(localStorage.getItem('collfiltab')) || 0);
  useEffect(() => {
    localStorage.setItem('collfiltab', activeIndex);
    onFilterChange(activeIndex);
}, [activeIndex]);
  const icons = [<svg viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21.6 23.9625C21.6001 24.7322 21.308 25.4732 20.7828 26.0358C20.2575 26.5984 19.5383 26.9406 18.7704 26.9933L18.5625 27H8.4375C7.66783 27.0001 6.92682 26.708 6.36423 26.1828C5.80164 25.6575 5.45943 24.9383 5.40675 24.1704L5.4 23.9625V3.0375C5.39991 2.26783 5.692 1.52682 6.21725 0.964233C6.7425 0.401644 7.46173 0.0594299 8.2296 0.00675018L8.4375 2.29482e-08H18.5625C19.3322 -9.45295e-05 20.0732 0.291999 20.6358 0.817249C21.1984 1.3425 21.5406 2.06173 21.5933 2.8296L21.6 3.0375V23.9625ZM22.95 4.05H23.9625C24.7322 4.04991 25.4732 4.342 26.0358 4.86725C26.5984 5.3925 26.9406 6.11173 26.9933 6.8796L27 7.0875V19.9125C27.0001 20.6822 26.708 21.4232 26.1828 21.9858C25.6575 22.5484 24.9383 22.8906 24.1704 22.9433L23.9625 22.95H22.95V4.05ZM4.05 22.95H3.0375C2.26783 22.9501 1.52682 22.658 0.964233 22.1328C0.401644 21.6075 0.0594299 20.8883 0.00675018 20.1204L2.29482e-08 19.9125V7.0875C-9.45295e-05 6.31783 0.291999 5.57682 0.817249 5.01423C1.3425 4.45164 2.06173 4.10943 2.8296 4.05675L3.0375 4.05H4.05V22.95Z" fill="#0c1d91ff"/>
          </svg>,
          <svg className = "svg2" viewBox="0 0 18 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0H18V9L12 15L18 21V30H0V21L6 15L0 9V0ZM15 21.75L9 15.75L3 21.75V27H15V21.75ZM9 14.25L15 8.25V3H3V8.25L9 14.25ZM6 6H12V7.125L9 10.125L6 7.125V6Z" fill="#0c1d91ff"/>
          </svg>,
          <svg viewBox="0 0 34 26" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M24.8409 2L26.2551 0.585786C25.4741 -0.195262 24.2077 -0.195262 23.4267 0.585786L24.8409 2ZM2 1.36364C0.89543 1.36364 0 2.25907 0 3.36364C0 4.46821 0.89543 5.36364 2 5.36364V1.36364ZM4.04545 5.36364C5.15002 5.36364 6.04545 4.46821 6.04545 3.36364C6.04545 2.25907 5.15002 1.36364 4.04545 1.36364V5.36364ZM2 8.18182C0.89543 8.18182 0 9.07725 0 10.1818C0 11.2864 0.89543 12.1818 2 12.1818V8.18182ZM8.13636 12.1818C9.24093 12.1818 10.1364 11.2864 10.1364 10.1818C10.1364 9.07725 9.24093 8.18182 8.13636 8.18182V12.1818ZM2 15C0.89543 15 0 15.8954 0 17C0 18.1046 0.89543 19 2 19V15ZM12.2273 19C13.3318 19 14.2273 18.1046 14.2273 17C14.2273 15.8954 13.3318 15 12.2273 15V19ZM2 21.8182C0.89543 21.8182 0 22.7136 0 23.8182C0 24.9228 0.89543 25.8182 2 25.8182V21.8182ZM17 25.8182C18.1046 25.8182 19 24.9228 19 23.8182C19 22.7136 18.1046 21.8182 17 21.8182V25.8182ZM26.8409 23.8182V2H22.8409V23.8182H26.8409ZM23.4267 0.585786L16.2676 7.74488L19.096 10.5733L26.2551 3.41421L23.4267 0.585786ZM23.4267 3.41421L30.5858 10.5733L33.4142 7.74488L26.2551 0.585786L23.4267 3.41421ZM2 5.36364H4.04545V1.36364H2V5.36364ZM2 12.1818H8.13636V8.18182H2V12.1818ZM2 19H12.2273V15H2V19ZM2 25.8182H17V21.8182H2V25.8182Z" fill="#0c1d91ff"/>
          </svg>,
          <svg viewBox="0 0 34 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M24.8409 22.8182L23.4267 24.2324C24.2077 25.0134 25.4741 25.0134 26.2551 24.2324L24.8409 22.8182ZM2 0.363636C0.89543 0.363636 0 1.25907 0 2.36364C0 3.46821 0.89543 4.36364 2 4.36364V0.363636ZM4.04545 4.36364C5.15002 4.36364 6.04545 3.46821 6.04545 2.36364C6.04545 1.25907 5.15002 0.363636 4.04545 0.363636V4.36364ZM2 7.18182C0.89543 7.18182 0 8.07725 0 9.18182C0 10.2864 0.89543 11.1818 2 11.1818V7.18182ZM8.13636 11.1818C9.24093 11.1818 10.1364 10.2864 10.1364 9.18182C10.1364 8.07725 9.24093 7.18182 8.13636 7.18182V11.1818ZM2 14C0.89543 14 0 14.8954 0 16C0 17.1046 0.89543 18 2 18V14ZM12.2273 18C13.3318 18 14.2273 17.1046 14.2273 16C14.2273 14.8954 13.3318 14 12.2273 14V18ZM2 20.8182C0.89543 20.8182 0 21.7136 0 22.8182C0 23.9228 0.89543 24.8182 2 24.8182V20.8182ZM17 24.8182C18.1046 24.8182 19 23.9228 19 22.8182C19 21.7136 18.1046 20.8182 17 20.8182V24.8182ZM22.8409 1V22.8182H26.8409V1H22.8409ZM26.2551 21.404L19.096 14.2449L16.2676 17.0733L23.4267 24.2324L26.2551 21.404ZM26.2551 24.2324L33.4142 17.0733L30.5858 14.2449L23.4267 21.404L26.2551 24.2324ZM2 4.36364H4.04545V0.363636H2V4.36364ZM2 11.1818H8.13636V7.18182H2V11.1818ZM2 18H12.2273V14H2V18ZM2 24.8182H17V20.8182H2V24.8182Z" fill="#0c1d91ff"/>
          </svg>
  ];

  const handleIconClick = (index) => {
    setActiveIndex(index);
  };

  return (
    <div className='searchfilters'>
      {icons.map((svg, index) => (
        <FilterIcon
          key={index}
          svg={svg}
          isActive={activeIndex === index}
          onClick={() => handleIconClick(index)}
        />
      ))}
    </div>
  );
};

export default Filters;